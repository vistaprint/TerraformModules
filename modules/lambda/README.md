This module creates multiple lambdas that can be invoked by an API Gateway. Each lambda accesses the same package through different handlers.

# Example

```hcl
module "lambda" { 
  source      = git::https://github.com/betabandido/terraformmodules.git//modules/lambda"
  lambda_file = "lambda.zip"

  functions = {
    LambdaModuleTest1 = {
      handler = "package.say_hello"
    }
    LambdaModuleTest2 = {
      handler = "package.say_goodbye"
    }
  }

  variables = {
      foo = "FOO"
      bar = "BAR"
  }

  memory_size  = "256"

  source_arn   = "arn:aws:execute-api:${var.region}:${var.accountId}:${aws_api_gateway_rest_api.api.id}/*/GET/*/*"
  statement_id = "AllowExecutionFromAPIGateway"
  policy       = "${data.template_file.example_policy.rendered}"
  principal    = "apigateway.amazonaws.com"
  prefix       = "MyLambdas"
  runtime      = "python3.6"
}
```

## Notes

The example above uses a policy generated by a template. This is an example template with cloudwatch logging and dynamodb get functionality. Save as `templates/example_policy.tpl` relative to the `main.tf` it will be used in.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "logs:DescribeLogStreams",
        "dynamodb:GetItem"
      ],
      "Resource": [
        "arn:aws:logs:*:*:*",
        "arn:aws:dynamodb:${region}:${accountId}:table/*"
      ]
    }
  ]
}
```

To use the template in `main.tf` specify a data resource like so:

```hcl
data "template_file" "example_policy" {
  template = "${file("templates/example_policy.tpl")}"
  vars {
    region    = "${var.region}"
    accountId = "${var.accountId}"
  }
}
```
