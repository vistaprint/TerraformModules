This module creates multiple lambdas that can be invoked by an API Gateway. Each lambda accesses the same package through different handlers.

# Example

```
module "lambda" { 
  source = git::https://github.com/betabandido/terraformmodules.git//modules/lambda"
  lambda_file = "lambda.zip"
  function_names_and_handlers = {
    LambdaModuleTest1 = "package.say_hello"
    LambdaModuleTest2 = "package.say_goodbye"
  }
  source_arn = "arn:aws:execute-api:${var.region}:${var.accountId}:${aws_api_gateway_rest_api.api.id}/*/GET/*/*"
  policy = "${data.template_file.example_policy.rendered}"
  prefix = "MyLambdas"
  runtime = "python3.6"
}
```

## Notes

The example above uses a policy generated by a template. This is an example template with cloudwatch logging and dynamodb get functionality. Save as `templates/example_policy.tpl` relative to the `main.tf` it will be used in.

```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents",
        "logs:DescribeLogStreams",
        "dynamodb:GetItem"
      ],
      "Resource": [
        "arn:aws:logs:*:*:*",
        "arn:aws:dynamodb:${region}:${accountId}:table/*"
      ]
    }
  ]
}
```

To use the template in `main.tf` specify a data resource like so:

```
data "template_file" "example_policy" {
  template = "${file("templates/example_policy.tpl")}"
  vars {
    region = "${var.region}"
    accountId = "${var.accountId}"
  }
}
```
